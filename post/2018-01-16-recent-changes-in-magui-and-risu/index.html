<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Recent changes in Magui and Risu - RISU</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Recent changes in Magui and Risu"><meta property="og:description" content="What&rsquo;s new? During recent weeks we&rsquo;ve been coding and performing several changes to Risu and Magui.
Checking the latest logs or list of issues open and closed on github is probably not an easy task or the best way to get &lsquo;up-to-date&rsquo; with changes, so I&rsquo;ll try to compile a few here.
First of all, we&rsquo;re going to present it at Devconf.cz 2018, so come stop-by if assisting :-)
Some of the changes include&mldr;"><meta property="og:type" content="article"><meta property="og:url" content="https://risuorg.github.io/post/2018-01-16-recent-changes-in-magui-and-risu/"><meta property="article:section" content="post"><meta property="article:published_time" content="2018-01-16T21:17:00+02:00"><meta property="article:modified_time" content="2018-01-16T21:17:00+02:00"><meta itemprop=name content="Recent changes in Magui and Risu"><meta itemprop=description content="What&rsquo;s new? During recent weeks we&rsquo;ve been coding and performing several changes to Risu and Magui.
Checking the latest logs or list of issues open and closed on github is probably not an easy task or the best way to get &lsquo;up-to-date&rsquo; with changes, so I&rsquo;ll try to compile a few here.
First of all, we&rsquo;re going to present it at Devconf.cz 2018, so come stop-by if assisting :-)
Some of the changes include&mldr;"><meta itemprop=datePublished content="2018-01-16T21:17:00+02:00"><meta itemprop=dateModified content="2018-01-16T21:17:00+02:00"><meta itemprop=wordCount content="618"><meta itemprop=keywords content="Risu,magui,whatsnew,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Recent changes in Magui and Risu"><meta name=twitter:description content="What&rsquo;s new? During recent weeks we&rsquo;ve been coding and performing several changes to Risu and Magui.
Checking the latest logs or list of issues open and closed on github is probably not an easy task or the best way to get &lsquo;up-to-date&rsquo; with changes, so I&rsquo;ll try to compile a few here.
First of all, we&rsquo;re going to present it at Devconf.cz 2018, so come stop-by if assisting :-)
Some of the changes include&mldr;"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link crossorigin=anonymous href=/assets/css/core.min.8ba71cf50a8381d9d94ef0bb5c7367004d6fe1de98371c5720571e9e48a03a3d.css integrity="sha256-i6cc9QqDgdnZTvC7XHNnAE1v4d6YNxxXIFcenkigOj0=" rel="preload stylesheet" as=style><link rel="shortcut icon" href=/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-81705-14","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class="logo logo--mixed"><a class=logo__link href=/ title=RISU rel=home><div class="logo__item logo__imagebox"><img class=logo__img src=/images/risu.png></div><div class="logo__item logo__text"><div class=logo__title>RISU</div><div class=logo__tagline>Find and Report Issues</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>About</span></a></li><li class=menu__item><a class=menu__link href=/contributing/><span class=menu__text>Contributing</span></a></li><li class=menu__item><a class=menu__link href=/readme.magui/><span class=menu__text>Magui</span></a></li><li class=menu__item><a class=menu__link href=/readme.risu/><span class=menu__text>Risu</span></a></li><li class=menu__item><a class=menu__link href=/changelog/><span class=menu__text>Timeline</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Recent changes in Magui and Risu</h1><div class="post__meta meta"><div class="meta__item-author meta__item"><svg class="meta__icon icon icon-author" width="16" height="16" viewBox="0 0 12 16"><path d="M6 1c2.2.0 3.5 2 3.5 4.5C9.5 7 8.9 8.2 8 9c2.9.8 4 2.5 4 5v1H0v-1c0-2.5 1.1-4.2 4-5-.9-.8-1.5-2-1.5-3.5C2.5 3 3.8 1 6 1z"/></svg><span class=meta__text>RISU team</span></div><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2018-01-16T21:17:00+02:00>2018-01-16</time></div></div></header><div class="post__toc toc"><div class=toc__title>Page content</div><div class=toc__menu><nav id=TableOfContents><ul><li><a href=#whats-new>What&rsquo;s new?</a><ul><li><a href=#risu>Risu</a></li><li><a href=#magui>Magui</a></li></ul></li><li><a href=#wrap-up>Wrap up!</a></li></ul></nav></div></div><div class="content post__content clearfix"><h2 id=whats-new>What&rsquo;s new?</h2><p>During recent weeks we&rsquo;ve been coding and performing several changes to <a href=https://iranzo.github.io/blog/2017/07/26/Risu-framework-for-detecting-known-issues/>Risu</a> and <a href=https://iranzo.github.io/blog/2017/07/31/Magui-for-analysis-of-issues-across-several-hosts/>Magui</a>.</p><p>Checking the latest logs or list of issues open and closed on github is probably not an easy task or the best way to get &lsquo;up-to-date&rsquo; with changes, so I&rsquo;ll try to compile a few here.</p><p>First of all, we&rsquo;re going to present it at <a href=https://devconfcz2018.sched.com/event/DJXG/detect-pitfalls-of-osp-deployments-with-Risu>Devconf.cz 2018</a>, so come stop-by if assisting :-)</p><p>Some of the changes include&mldr;</p><h3 id=risu>Risu</h3><ul><li>New functions for bash scripts!<ul><li>We&rsquo;ve created lot of functions to check different things:<ul><li>installed rpm</li><li>rpm over specific version</li><li>compare dates over X days</li><li>regexp in file</li><li>etc..</li></ul></li><li>Functions do allow to do quicker plugin development.</li></ul></li><li>save/restore options so they can be loaded automatically for each execution<ul><li>Think of enabled filters, excluded, etc</li></ul></li><li>metadata added for plugins and returned as dictionary</li><li>plugin has a unique ID for all installations based on plugin relative path and plugin name<ul><li>We do use that ID in magui to select the plugin data we&rsquo;ll be acting on</li></ul></li><li>plugin priority!<ul><li>Plugins are assigned a number between 0 and 1000 that represents how likely it&rsquo;s going to affect your environment, and you can filter also on it with <code>--prio</code></li></ul></li><li>extended via &rsquo;extensions&rsquo; to provide support for other plugins<ul><li>moved prior plugins to be <code>core</code> extension</li><li>ansible playbook support via <code>ansible-playbook</code> command</li><li>metadata plugins that just generate metadata (hostname, date for sosreport, etc)</li></ul></li><li>Web Interface!!<ul><li><a href=https://valleedelisle.com/>David Valee Delisle</a> did a great job on preparing an html that loads Risu.json and shows it graphically.</li><li>Thanks to his work, we did extended some other features like priority, categories, etc that are calculated via Risu and consumed via Risu-www.</li><li>Interface can also load <code>magui.json</code> (with <code>?json=magui.json</code>) and show it&rsquo;s output.</li><li>We did extend Risu to take <code>--web</code> to automatically create the json named <code>Risu.json</code> on the folder specified with <code>-o</code> and copy the <code>risu.html</code> file there. So if you provide sosreports over http, you can point to risu.html to see graphical status! (check latest image at Risu website as <a href=https://github.com/Risuorg/Risu/raw/master/doc/images/www.png>www.png</a> )</li></ul></li><li>Increased plugin count!<ul><li>Now we do have more than 119 across different categories</li><li>A new plugin in python <code>reboot.py</code> that checks for unexpected reboots</li><li>Spectre/Meltdown security checks!</li></ul></li></ul><h3 id=magui>Magui</h3><ul><li>If there&rsquo;s an existing <code>Risu.json</code> magui does load it to speed it up process across multiple sosreports.</li><li>Magui can also use <code>ansible-playbook</code> to copy Risu program to remote host and run there the command, and bring back the generated <code>Risu.json</code> so you can quickly run Risu across several hosts without having to manually perform operations or generate sosreports.</li><li>Moved prior data to two plugins:<ul><li><code>Risu-outputs</code><ul><li>Risu plugins output arranged by plugin and sosreport</li></ul></li><li><code>Risu-metadata</code><ul><li>Outputs metadata gathered by <code>metadata</code> plugins in Risu arranged by plugin and sosreport</li></ul></li></ul></li><li>First plugins that compare data received from Risu on global level<ul><li>Plugins are written in python and use each plugin <code>id</code> to just work on the data they know how to process</li><li><code>pipeline-yaml</code><ul><li>Checks if pipeline.yaml and warns if is different across hosts</li></ul></li><li><code>seqno</code><ul><li>Checks latest galera seqno on hosts</li></ul></li><li><code>release</code><ul><li>Reports RHEL release across hosts and warns if is different across hosts</li></ul></li></ul></li><li>Enable <code>quiet</code> mode on the data received from Risu as well as local plugins, so only outputs with ERROR or different output on sosreports is shown, even on magui plugins.</li></ul><h2 id=wrap-up>Wrap up!</h2><p>As you can see we&rsquo;ve been busy trying to improve plugins, Risu framework and Magui as well.</p><p>We&rsquo;ve been also busy demonstrating to others it&rsquo;s value and raising lot of new issues and closing them with our commits (294 requests closed so far).</p><p>So, come and <a href=https://github.com/Risuorg/Risu/issues/new>tell us</a> what else are you missing or how can we improve it to suit your needs (or code them yourself and submit a review!)</p></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/risu/ rel=tag>Risu</a></li><li class=tags__item><a class="tags__link btn" href=/tags/magui/ rel=tag>magui</a></li><li class=tags__item><a class="tags__link btn" href=/tags/whatsnew/ rel=tag>whatsnew</a></li></ul></div></footer></article></main><div class="authorbox clearfix"><figure class=authorbox__avatar><img alt="RISU team avatar" src=/images/risu.png class=avatar height=90 width=90></figure><div class=authorbox__header><span class=authorbox__name>About RISU team</span></div><div class=authorbox__description>Risu team works on getting an easy to extend framework for reporting issues at your systems</div></div><nav class="pager flex"><div class="pager__item pager__item--next"><a class=pager__link href=/post/2018-01-27-devconf.cz/ rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>Risu at DevConf.cz 2018!</p></a></div></nav></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2023 RISUorg team.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script>
<script src=/js/custom.js></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script></body></html>